{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7;\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport tw from 'twrnc';\nimport { Inter_400Regular, Inter_500Medium, Inter_600SemiBold, Inter_700Bold, Inter_800ExtraBold, Inter_900Black } from '@expo-google-fonts/inter';\nimport { useFonts } from 'expo-font';\nimport AppLoading from 'expo-app-loading';\nimport axios, { thumbnail_URL } from \"../axios_instance\";\nimport { formatDistanceToNowStrict } from 'date-fns';\nimport { AuthContext } from \"../Providers/AuthProvider\";\n\nfunction Post(_ref) {\n  var item = _ref.item,\n      onPress = _ref.onPress;\n\n  var _useFonts = useFonts({\n    Inter_400Regular: Inter_400Regular,\n    Inter_500Medium: Inter_500Medium,\n    Inter_600SemiBold: Inter_600SemiBold,\n    Inter_700Bold: Inter_700Bold,\n    Inter_800ExtraBold: Inter_800ExtraBold,\n    Inter_900Black: Inter_900Black\n  }),\n      _useFonts2 = _slicedToArray(_useFonts, 2),\n      fontsLoaded = _useFonts2[0],\n      error = _useFonts2[1];\n\n  if (!fontsLoaded) {\n    return React.createElement(AppLoading, null);\n  }\n\n  return React.createElement(TouchableOpacity, {\n    onPress: onPress,\n    style: tw(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"rounded mt-3 mb-4 items-center bg-white mx-auto w-5/6\"])))\n  }, React.createElement(View, null, React.createElement(Image, {\n    source: {\n      uri: thumbnail_URL + \"/\" + item.thumbnail\n    },\n    style: tw(_templateObject2 || (_templateObject2 = _taggedTemplateLiteralLoose([\"w-78.1 h-48 rounded rounded-b-none\"])))\n  }), React.createElement(View, {\n    style: tw(_templateObject3 || (_templateObject3 = _taggedTemplateLiteralLoose([\"flex-row items-center flex-wrap justify-between p-2\"])))\n  }, React.createElement(Text, {\n    style: tw.style('text-xl', {\n      fontFamily: 'Inter_700Bold'\n    })\n  }, item.title), React.createElement(Text, {\n    style: tw(_templateObject4 || (_templateObject4 = _taggedTemplateLiteralLoose([\"text-xs\"])))\n  }, formatDistanceToNowStrict(new Date(item.created_at)), \" ago\")), React.createElement(Text, {\n    style: tw.style('p-2 mb-2 text-sm', {\n      fontFamily: 'Inter_500Medium'\n    })\n  }, item.excerpt)));\n}\n\nfunction Home(_ref2) {\n  var navigation = _ref2.navigation;\n\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user,\n      logout = _useContext.logout;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      data = _useState4[0],\n      setData = _useState4[1];\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentPage = _useState6[0],\n      setPage = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isLoading = _useState8[0],\n      setIsLoading = _useState8[1];\n\n  useEffect(function () {\n    axios.defaults.headers.common['Authorization'] = \"Bearer \" + user.token;\n    getAllPosts();\n  }, [currentPage]);\n\n  function getAllPosts() {\n    setIsLoading(true);\n    axios.get(\"/posts/?page=\" + currentPage).then(function (response) {\n      console.log(response.data.data);\n      setData([].concat(_toConsumableArray(data), _toConsumableArray(response.data.data)));\n      setIsLoading(false);\n    }).catch(function (error) {\n      console.log(error);\n      setIsLoading(false);\n    });\n  }\n\n  function goToPost(index) {\n    navigation.navigate('ShowPost', {\n      id: index\n    });\n  }\n\n  var renderLoader = function renderLoader() {\n    return isLoading ? React.createElement(View, null, React.createElement(ActivityIndicator, {\n      size: \"large\",\n      color: \"#aaa\"\n    })) : null;\n  };\n\n  var loadNextPage = function loadNextPage() {\n    setPage(currentPage + 1);\n  };\n\n  var renderPosts = function renderPosts(_ref3) {\n    var item = _ref3.item;\n    return React.createElement(Post, {\n      item: item,\n      onPress: function onPress() {\n        return goToPost(item.id);\n      }\n    });\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: tw.style(\"pb-20\", {\n      backgroundColor: '#003f5c'\n    })\n  }, React.createElement(View, {\n    style: tw(_templateObject5 || (_templateObject5 = _taggedTemplateLiteralLoose([\"flex-row items-center mx-auto w-10/12 justify-between\"])))\n  }, React.createElement(Text, {\n    style: tw(_templateObject6 || (_templateObject6 = _taggedTemplateLiteralLoose([\"text-2xl text-white\"])))\n  }, \"Blog Posts\"), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return logout();\n    }\n  }, React.createElement(Text, {\n    style: tw(_templateObject7 || (_templateObject7 = _taggedTemplateLiteralLoose([\"text-white text-base\"])))\n  }, \"Log Out\"))), React.createElement(FlatList, {\n    data: data,\n    renderItem: renderPosts,\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    },\n    ListFooterComponent: renderLoader,\n    onEndReached: loadNextPage,\n    onEndReachedThreshold: 0,\n    initialNumToRender: 3,\n    windowSize: 2\n  }));\n}\n\nexport default Home;","map":{"version":3,"sources":["D:/Coding/react/invoke/finalProject/my-blog/src/Screens/Home.jsx"],"names":["React","useState","useEffect","useContext","tw","Inter_400Regular","Inter_500Medium","Inter_600SemiBold","Inter_700Bold","Inter_800ExtraBold","Inter_900Black","useFonts","AppLoading","axios","thumbnail_URL","formatDistanceToNowStrict","AuthContext","Post","item","onPress","fontsLoaded","error","uri","thumbnail","style","fontFamily","title","Date","created_at","excerpt","Home","navigation","user","logout","name","setName","data","setData","currentPage","setPage","isLoading","setIsLoading","defaults","headers","common","token","getAllPosts","get","then","response","console","log","catch","goToPost","index","navigate","id","renderLoader","loadNextPage","renderPosts","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { \r\n    SafeAreaView, \r\n    View, \r\n    FlatList, \r\n    Text, \r\n    TouchableOpacity,\r\n    Image,\r\n    ActivityIndicator,\r\n } \r\nfrom 'react-native';\r\nimport tw from 'twrnc';\r\nimport { \r\n  Inter_400Regular,\r\n  Inter_500Medium,\r\n  Inter_600SemiBold,\r\n  Inter_700Bold,\r\n  Inter_800ExtraBold,\r\n  Inter_900Black \r\n} from '@expo-google-fonts/inter';\r\nimport { useFonts } from 'expo-font';\r\nimport AppLoading from 'expo-app-loading';\r\nimport axios, { thumbnail_URL } from '../axios_instance';\r\nimport { formatDistanceToNowStrict } from 'date-fns';\r\nimport { AuthContext } from '../Providers/AuthProvider';\r\n// import { MarkdownView } from 'react-native-markdown-view'\r\n\r\nfunction Post({ item, onPress }) {\r\n  let [fontsLoaded, error] = useFonts({\r\n    Inter_400Regular,\r\n    Inter_500Medium,\r\n    Inter_600SemiBold,\r\n    Inter_700Bold,\r\n    Inter_800ExtraBold,\r\n    Inter_900Black \r\n  })\r\n\r\n  if (!fontsLoaded){\r\n    return <AppLoading />\r\n  }\r\n\r\n  return (\r\n    <TouchableOpacity onPress={onPress} style={tw`rounded mt-3 mb-4 items-center bg-white mx-auto w-5/6`}>\r\n      <View>\r\n        <Image \r\n            source={{uri: `${thumbnail_URL}/${item.thumbnail}` }}\r\n            style={tw`w-78.1 h-48 rounded rounded-b-none`}\r\n        />\r\n        <View style={tw`flex-row items-center flex-wrap justify-between p-2`}>\r\n          <Text\r\n            style={ tw.style('text-xl', {fontFamily: 'Inter_700Bold'})}\r\n          >\r\n              {item.title}\r\n          </Text>\r\n          <Text style={tw`text-xs`}>\r\n              {formatDistanceToNowStrict( new Date(item.created_at))} ago\r\n          </Text>\r\n        </View>\r\n        \r\n        <Text style={ tw.style('p-2 mb-2 text-sm', {fontFamily: 'Inter_500Medium'})}>\r\n            {item.excerpt}\r\n        </Text>\r\n      </View>\r\n    </TouchableOpacity>\r\n  )\r\n}\r\n\r\n// home page displays a list of blog cards\r\nfunction Home({ navigation }){\r\n  // auth logic \r\n  const { user, logout } = useContext(AuthContext);\r\n  const [name, setName] = useState(null);\r\n\r\n  const [data, setData] = useState([]);\r\n  const [currentPage, setPage] = useState(1);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    axios.defaults.headers.common['Authorization'] = `Bearer ${user.token}`;\r\n    getAllPosts();\r\n  }, [currentPage])\r\n\r\n  function getAllPosts(){\r\n    setIsLoading(true);\r\n    axios.get(`/posts/?page=${currentPage}`)\r\n      .then(response => {\r\n        console.log(response.data.data);\r\n        setData([...data , ...response.data.data]);\r\n        setIsLoading(false);\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n        setIsLoading(false);\r\n      })\r\n  }\r\n\r\n  function goToPost(index){\r\n    navigation.navigate('ShowPost', {id: index});\r\n  }\r\n  \r\n  const renderLoader = () => {\r\n    return(\r\n      isLoading ?\r\n        <View>\r\n          <ActivityIndicator size=\"large\" color=\"#aaa\" />\r\n        </View> : null\r\n    );\r\n  }\r\n\r\n  const loadNextPage = () => {\r\n    setPage(currentPage + 1);\r\n  }\r\n  \r\n  const renderPosts = ({ item }) => (\r\n      <Post item={item} onPress={() => goToPost(item.id)} />\r\n    );\r\n\r\n    return (\r\n      // <Text>Hi</Text>\r\n      <SafeAreaView style={tw.style(`pb-20`, {backgroundColor: '#003f5c'})}>\r\n        <View style={tw`flex-row items-center mx-auto w-10/12 justify-between`}>\r\n          <Text style={tw`text-2xl text-white`}>Blog Posts</Text>\r\n          <TouchableOpacity onPress={() => logout()}>\r\n            <Text style={tw`text-white text-base`}>Log Out</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n        <FlatList\r\n          data={data}\r\n          renderItem={renderPosts}\r\n          // onPress={() => goToPost(item.id)}\r\n          keyExtractor={item => item.id}\r\n          ListFooterComponent={renderLoader}\r\n          onEndReached={loadNextPage}\r\n          onEndReachedThreshold={0}\r\n          initialNumToRender={3}\r\n          windowSize={2}\r\n        />\r\n      </SafeAreaView>\r\n    );\r\n}\r\n\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}